

# Wazuh Deployment Notes ‚Äì SlothLab
**Date:** November 15, 2025

---

## üîß Installation Scripts (Ubuntu 22.04)

```bash
# Download and run Wazuh installation script (Manager, Indexer, Dashboard)
curl -sO https://packages.wazuh.com/4.7/wazuh-install.sh
sudo bash wazuh-install.sh -a
```

## ‚úÖ Post-Install Checklist

- [x] Access dashboard via `https://<server-ip>` (default user: `admin`, password: generated on install)
- [x] Validate Wazuh services with: `sudo systemctl status wazuh-manager wazuh-dashboard wazuh-indexer`
- [x] Confirm port access (default: 443 for dashboard, 1514/1515 for agent communication)

## ‚ö†Ô∏è Common Issues and Fixes

### ‚ùå Wazuh Manager Fails to Start

- **Symptom:** `ossec.log` shows vague XML config error, nothing in `systemctl`
- **Fix:** Run `xmllint /var/ossec/etc/ossec.conf --noout` to validate syntax
- **Tip:** Even one bad rule or misplaced tag can cause full failure

### ‚ùå Custom Rules Break Manager

- **Fix:** Comment out custom rules in `/var/ossec/etc/rules/local_rules.xml` and restart manager  
- **Prevention:** Validate changes before restart, use `wazuh-logtest` if available

### ‚ùå Agent Not Showing in Dashboard

- **Fix:** Ensure agent is registered:  
  ```bash
  /var/ossec/bin/agent-auth -m <manager-ip> -A <agent-name>
  ```
- **Check:** Firewall rules on TCP 1514/1515, confirm `/var/ossec/logs/ossec.log` for registration attempts

## üß† Lessons Learned

- Always validate XML files before restarting the manager
- Keep a backup of working `ossec.conf` and `local_rules.xml` before editing
- Dashboard may show green even if `wazuh-manager` is down ‚Äî check service status directly
- Use `journalctl -u wazuh-manager -e` for deeper error output beyond Wazuh logs
- Start with built-in rules and tune later ‚Äî don‚Äôt overwhelm the dashboard with noise early on

## üìò Future Considerations

- Implement centralized logging with rsyslog/syslog-ng feeding into Wazuh
- Explore integration with MITRE ATT&CK mappings and threat intelligence feeds
- Document tuning decisions for reproducibility

---

**Maintained by:** Aaron Lopez  
**Repo:** [2025_LowBudgetLab](https://github.com/Aaron00204/2025_LowBudgetLab)
